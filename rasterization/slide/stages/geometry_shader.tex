\section{Geometry Shader}

\subsection{Overview}
\begin{frame}{Geometry Shader Stage}
  \begin{columns}
    \small
    \begin{column}{0.8\textwidth}
      \begin{raybox}{Geometry Shader}
        \textbf{Input:} Primitives (points, lines, triangles) \\
        \textbf{Output:} New primitives (can generate or discard)

        \vspace{0.3cm}
        \textbf{Purpose:}
        \begin{itemize}
          \item Generate new geometry from existing primitives
          \item Discard primitives based on conditions
          \item Transform primitive types
          \item Add detail or effects
        \end{itemize}
      \end{raybox}
    \end{column}
    \begin{column}{0.2\textwidth}
      \begin{tikzpicture}[scale=0.7]
        % Point particle
        \fill[ObjectColor] (3,3) circle (2pt);
        \node[above] at (3,3.2) {\textbf{Input}};

        \draw[->, thick, AccentColor] (3,2.5) -- (3,0.8);
        % Generated quad
        \node[below] at (3,-0.2) {\textbf{Output}};

        \draw[thick, SecondaryColor, fill=SecondaryColor!20] (2.5,0.5) rectangle (3.5,0);
      \end{tikzpicture}
    \end{column}
  \end{columns}
\end{frame}

\subsection{Use Cases}
\begin{frame}{Billboarding: Use Case}
  \begin{columns}
    \begin{column}{0.7\textwidth}
      \begin{raybox}{Billboarding}
        \textbf{Convert points to camera-facing quads}

        \vspace{0.2cm}
        \textbf{Applications:}
        \begin{itemize}
          \item Grass, leaves
          \item Particle systems
          \item Sprites and icons
        \end{itemize}

        \vspace{0.2cm}
        \textbf{Process:}
        \begin{enumerate}
          \item \textbf{Input}: Single point
          \item Calculate camera-facing orientation
          \item \textbf{Output}: 4 vertices forming a quad
        \end{enumerate}
      \end{raybox}
    \end{column}
    \begin{column}{0.3\textwidth}
      \begin{tikzpicture}[scale=0.6]
        % Camera
        \node[circle, fill=PrimaryColor!30, minimum size=0.5cm] (cam) at (0,2) {\tiny \faIcon{video}};

        % Point particle
        \fill[ObjectColor] (3,3) circle (2pt);
        \node[above] at (3,3) {\scriptsize Point};

        \draw[->, thick, AccentColor] (3,2.5) -- (3,0.8);
        \node[right, align=center] at (3.2,1.7) {\scriptsize Geometry \\ \scriptsize Shader};

        % Generated quad
        \node[below] at (3,-0.2) {\scriptsize Camera-facing Quad};

        % Viewing direction
        \draw[dashed, gray] (cam) -- (3,3);
        \draw[dashed, gray] (cam) -- (3,0.25);
        \draw[thick, SecondaryColor, fill=SecondaryColor!20] (2.5,0.5) rectangle (3.5,0);
      \end{tikzpicture}
    \end{column}
  \end{columns}
\end{frame}
